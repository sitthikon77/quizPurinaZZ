<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROPLAN | Quiz Game</title>

    <!-- css frameworks -->
    <script src="https://cdn.tailwindcss.com"></script> <!-- tailwind CSS -->
    <link rel="stylesheet" href="style/style.css"> <!-- style CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tw-elements/dist/css/index.min.css" />
    <!-- tailwind elements CSS -->
    <!-- / css frameworks -->
</head>

<body class="h-screen overflow-hidden flex items-center justify-center bg-black">

    <div class="bg-grey-lighter min-h-screen flex flex-col ">
        <div class="container max-w-sm mx-auto flex-1 flex flex-col items-center justify-center px-2">

            <form class="bg-orange-50 border-8  border-yellow-600  px-14 py-10  shadow-md text-black w-full"
                onsubmit="signup()">
                <h2 class="mb-6 text-2xl text-center">Congratulation!!!</h2>
                <!-- input-name -->
                <div id = "name" class="font-bold flex mb-4" style="font-family:gothamblack; font-size: 20px;">
                    
                </div>
                <!-- input-score -->
                <div id = "score" class="font-bold flex mb-4" style="font-family:gothamblack; font-size: 20px;">
                    

                </div>
                <!-- input-phone -->
                <div id = "phone" class="font-bold flex mb-4" style="font-family:gothamblack; font-size: 18px;">

                </div>
                <h1 class="mb-3 text-xl text-center font-semibold" style="font-family: gothamblack;">*You can play game 1 time a day</h1>
            </form>
        </div>
    </div>
    
    <script>
        var retrievedObject = localStorage.getItem("round_code");
        var retrievedUser = localStorage.getItem("user_game_id");
        var list_score;

        JSON.parse(retrievedObject);
        var obj = JSON.parse(retrievedUser);

        // Remove double quotes from a String
        var strRoundCode = retrievedObject;

        const user_game = obj.user_game_id;
        const roundCode = strRoundCode.replace(/^"(.*)"$/, "$1");

        var data = "";

        var xhr = new XMLHttpRequest();
        xhr.withCredentials = true;

        xhr.addEventListener("readystatechange", function() {
        if(this.readyState === 4) {

            var myJSON = this.responseText;
            list_score = JSON.parse(myJSON);

            fetchScore()
        }
        });

        xhr.open("GET", "https://api.purinaroadshow.rockinevent.com/api/user/round/myscore/" + roundCode);+
        xhr.setRequestHeader("Authorization", "Bearer " + user_game);
        xhr.send(data);

        function fetchScore() {

        let name = document.getElementById("name");
        let score = document.getElementById("score");
        let phone = document.getElementById("phone");
        // let code = document.getElementById("code");
        name.innerHTML = `<h3 class="mx-6" >Name</h3> <h1 class=" font-light	 w-full 	rounded">${list_score.name}</h1>`
        score.innerHTML = `<h3 class="mx-6">Score</h3> <h1 class=" font-light	 w-full 	rounded">${list_score.total_score}</h1>`
        phone.innerHTML = `<h3 class="mx-5 ">MO&nbsp;No.</h3> <h1 class= "font-light	 w-full 	rounded">${list_score.phone}</h1>`
        // code.innerHTML = `<h3>Code</h3> <h1 class="font-light w-full p-3	 rounded mb-4">${roundCode}</h1>`

    }

    </script>
</body>

</html>

